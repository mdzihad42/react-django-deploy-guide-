# ржЧрж╛ржЗржб: cPanel-ржП React ржПржмржВ Django ржкрзНрж░ржЬрзЗржХрзНржЯ рж╣рзЛрж╕рзНржЯ ржХрж░рж╛рж░ ржирж┐рзЯржо
**рж▓рзЗржЦржХ:** Antigravity  
**рждрж╛рж░рж┐ржЦ:** рзй ржЬрж╛ржирзБржпрж╝рж╛рж░рзА, рзирзжрзирзм

ржПржЗ ржЧрж╛ржЗржбржЯрж┐ ржЖржкржирж╛ржХрзЗ рж╢рзЗржЦрж╛ржмрзЗ ржХрж┐ржнрж╛ржмрзЗ cPanel-ржП ржПржХржЯрж┐ **React (Frontend)** ржПржмржВ **Django (Backend)** ржЕрзНржпрж╛ржк ржЦрзБржм рж╕рж╣ржЬрзЗ ржПржмржВ ржкрзНрж░ржлрзЗрж╢ржирж╛рж▓рж┐ рж╣рзЛрж╕рзНржЯ ржХрж░рждрзЗ рж╣рзЯред ржЖржорж░рж╛ ржжрзБржЯрж┐ ржЖрж▓рж╛ржжрж╛ рж╕рж╛ржм-ржбрзЛржорзЗржЗржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржм, ржпрж╛ ржмрзЬ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ржЬржирзНржп рж╕ржмржЪрзЗрзЯрзЗ ржнрж╛рж▓рзЛ ржкржжрзНржзрждрж┐ред

## ЁЯПЧя╕П ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░ (ржХрж┐ржнрж╛ржмрзЗ рж╕рж╛ржЬрж╛ржмрзЛ)
ржЖржорж░рж╛ ржкрзБрж░рзЛ рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ржХрзЗ ржжрзБржЗ ржнрж╛ржЧрзЗ ржнрж╛ржЧ ржХрж░ржм:
1.  **Backend (API):** ржПржЯрж┐ ржерж╛ржХржмрзЗ ржмрж╛ `chatapp.yourdomain.com`-ржП (Django)ред
2.  **Frontend (UI):** ржПржЯрж┐ ржерж╛ржХржмрзЗ `chat.yourdomain.com`-ржП (React)ред

---

## тЬЕ ржкрж╛рж░рзНржЯ рзз: Django Backend ржбрзЗржкрзНрж▓рзЯржорзЗржирзНржЯ

### рзз. `settings.py` ржлрж╛ржЗрж▓ ржкрзНрж░рж╕рзНрждрзБржд ржХрж░рж╛
ржЖржкрж▓рзЛржб ржХрж░рж╛рж░ ржЖржЧрзЗ ржЖржкржирж╛рж░ Django рж╕рзЗржЯрж┐ржВрж╕ ржлрж╛ржЗрж▓рзЗ ржХрж┐ржЫрзБ ржЬрж░рзБрж░рж┐ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ рж╣ржмрзЗред

**`ALLOWED_HOSTS` ржЖржкржбрзЗржЯ ржХрж░рзБржи:**
```python
ALLOWED_HOSTS = ["*", "chatapp.yourdomain.com", "www.chatapp.yourdomain.com"]
```

**CORS ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи (React ржХрж╛ржирзЗржХрж╢ржирзЗрж░ ржЬржирзНржп ржЦрзБржм ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг):**
ржкрзНрж░ржержорзЗ `corsheaders` ржЗржирзНрж╕ржЯрж▓ ржХрж░рж╛ ржЖржЫрзЗ ржХрж┐ ржирж╛ ржирж┐рж╢рзНржЪрж┐ржд рж╣рзЛржиред
```python
INSTALLED_APPS = [
    # ... ржЕржирзНржпрж╛ржирзНржп ржЕрзНржпрж╛ржкрж╕
    'corsheaders',
]

MIDDLEWARE = [
    'corsheaders.middleware.CorsMiddleware', # ржПржЯрж┐ ржЕржмрж╢рзНржпржЗ рж╕ржмрж╛рж░ ржЙржкрж░рзЗ рж░рж╛ржЦржмрзЗржи
    'django.middleware.security.SecurityMiddleware',
    'whitenoise.middleware.WhiteNoiseMiddleware', # рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ ржлрж╛ржЗрж▓рзЗрж░ ржЬржирзНржп
    # ...
]

# ржЖржкржирж╛рж░ React ржбрзЛржорзЗржЗржирзЗрж░ рж▓рж┐ржЩрзНржХ ржПржЦрж╛ржирзЗ ржжрж┐ржи
CORS_ALLOWED_ORIGINS = [
    "https://chat.yourdomain.com",
    "https://www.chat.yourdomain.com",
    "http://localhost:5173", # рж▓рзЛржХрж╛рж▓ ржЯрзЗрж╕рзНржЯрзЗрж░ ржЬржирзНржп
]

CSRF_TRUSTED_ORIGINS = [
    "https://chat.yourdomain.com",
    "https://chatapp.yourdomain.com",
]
```

### рзи. cPanel-ржП Django рж╕рзЗржЯржЖржк
1.  **cPanel**-ржП рж▓ржЧржЗржи ржХрж░рзБржиред
2.  **Subdomains** ржЕржкрж╢ржирзЗ ржпрж╛ржи ржПржмржВ ржмрзНржпрж╛ржХржПржирзНржбрзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ рж╕рж╛ржм-ржбрзЛржорзЗржЗржи ржЦрзБрж▓рзБржи (ржпрзЗржоржи: `chatapp.yourdomain.com`)ред
3.  **"Setup Python App"** ржЕржкрж╢ржирзЗ ржпрж╛ржиред
4.  **Create Application**-ржП ржХрзНрж▓рж┐ржХ ржХрж░рзБржи:
    *   **Python Version:** рзй.рзп ржмрж╛ рждрж╛рж░ ржЙржкрж░рзЗрж░ ржнрж╛рж░рзНрж╕ржи ржмрзЗржЫрзЗ ржирж┐ржиред
    *   **Application Root:** ржПржХржЯрж╛ ржлрзЛрж▓рзНржбрж╛рж░рзЗрж░ ржирж╛ржо ржжрж┐ржи ржпрзЗржЦрж╛ржирзЗ ржХрзЛржб ржЖржкрж▓рзЛржб ржХрж░ржмрзЗржи (ржпрзЗржоржи: `backend_app`)ред
    *   **Application URL:** ржЖржкржирж╛рж░ рж╕рж╛ржм-ржбрзЛржорзЗржЗржи рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи (`chatapp.yourdomain.com`)ред
    *   **Create** ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред

### рзй. ржХрзЛржб ржЖржкрж▓рзЛржб ржХрж░рж╛
1.  **File Manager**-ржП ржпрж╛ржиред
2.  ржЖржкржирж╛рж░ рждрзИрж░рж┐ ржХрж░рж╛ `backend_app` ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржврзБржХрзБржиред
3.  ржЖржкржирж╛рж░ Django ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ рж╕ржм ржлрж╛ржЗрж▓ ржЖржкрж▓рзЛржб ржХрж░рзБржи (ржпрзЗ ржлрзЛрж▓рзНржбрж╛рж░рзЗ `manage.py` ржЖржЫрзЗ)ред
    *   *ржЯрж┐ржкрж╕: ржХржорзНржкрж┐ржЙржЯрж╛рж░ ржерзЗржХрзЗ ржЬрж┐ржк (ZIP) ржХрж░рзЗ ржЖржкрж▓рзЛржб ржХрж░рзБржи, рждрж╛рж░ржкрж░ cPanel-ржП ржПржХрзНрж╕ржЯрзНрж░рж╛ржХрзНржЯ ржХрж░рзБржиред*
4.  **рж╕рждрж░рзНржХрждрж╛:** рж▓рзЛржХрж╛рж▓ ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗрж░ `venv` ржмрж╛ `env` ржлрзЛрж▓рзНржбрж╛рж░ ржЖржкрж▓рзЛржб ржХрж░ржмрзЗржи ржирж╛ред

### рзк. `passenger_wsgi.py` ржлрж╛ржЗрж▓ рж╕рзЗржЯржЖржк
cPanel-ржПрж░ рж╕рзЗржЗ ржлрзЛрж▓рзНржбрж╛рж░рзЗ `passenger_wsgi.py` ржлрж╛ржЗрж▓ржЯрж┐ ржПржбрж┐ржЯ ржХрж░рзБржи (ржирж╛ ржерж╛ржХрж▓рзЗ рждрзИрж░рж┐ ржХрж░рзБржи) ржПржмржВ ржирж┐ржЪрзЗрж░ ржХрзЛржбржЯрж┐ ржжрж┐ржи:
```python
import os
import sys

# 'social' ржПрж░ ржЬрж╛рзЯржЧрж╛рзЯ ржЖржкржирж╛рж░ ржкрзНрж░ржЬрзЗржХрзНржЯ ржлрзЛрж▓рзНржбрж╛рж░рзЗрж░ ржирж╛ржо ржжрж┐ржмрзЗржи (ржпрзЗржЯрж╛рж░ ржнрж┐рждрж░рзЗ settings.py ржЖржЫрзЗ)
from social.wsgi import application
```

### рзл. ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ ржЗржирзНрж╕ржЯрж▓ ржХрж░рж╛
1.  ржЖржмрж╛рж░ **Setup Python App** ржкрзЗржЬрзЗ ржпрж╛ржиред
2.  ржирж┐ржЪрзЗ "Configuration files" ржмржХрзНрж╕рзЗ `requirements.txt` рж▓рж┐ржЦрзЗ **Add** ржХрж░рзБржиред
3.  **Run Pip Install** ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред ржХрзЯрзЗржХ рж╕рзЗржХрзЗржирзНржб рж╕ржорзЯ ржирж┐ржмрзЗред

### рзм. рж╢рзЗрж╖ ржХрж┐ржЫрзБ ржХрж╛ржЬ
*   **Database Setup:** ржЯрж╛рж░рзНржорж┐ржирж╛рж▓ ржУржкрзЗржи ржХрж░рзЗ `python manage.py migrate` ржХржорж╛ржирзНржб ржжрж┐ржиред
*   **Static Files:** ржХржорж╛ржирзНржб ржжрж┐ржи `python manage.py collectstatic`ред
*   **Superuser:** ржПржбржорж┐ржи ржкрзНржпрж╛ржирзЗрж▓рзЗ ржврзЛржХрж╛рж░ ржЬржирзНржп `python manage.py createsuperuser` ржжрж┐рзЯрзЗ ржЖржЗржбрж┐/ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржмрж╛ржирж╛ржиред
*   **Restart:** рж╕ржм рж╢рзЗрж╖рзЗ ржЕрзНржпрж╛ржкржЯрж┐ **Restart** ржжрж┐ржиред

---

## ЁЯОи ржкрж╛рж░рзНржЯ рзи: React Frontend ржбрзЗржкрзНрж▓рзЯржорзЗржирзНржЯ

### рзз. API рж▓рж┐ржЩрзНржХ ржарж┐ржХ ржХрж░рж╛
ржЖржкржирж╛рж░ React ржХрзЛржбрзЗ (ржпрзЗржоржи `api.js` ржлрж╛ржЗрж▓рзЗ) ржмрзНржпрж╛ржХржПржирзНржбрзЗрж░ рж▓рж┐ржЩрзНржХржЯрж┐ ржмрж╕рж┐рзЯрзЗ ржжрж┐ржиред

```javascript
// src/api.js
import axios from 'axios';

const api = axios.create({
  // ржЖржкржирж╛рж░ Django ржЕрзНржпрж╛ржкрзЗрж░ рж▓рж┐ржЩрзНржХ
  baseURL: 'https://chatapp.yourdomain.com/api/', 
});

export default api;
```

### рзи. ржкрзНрж░ржЬрзЗржХрзНржЯ ржмрж┐рж▓рзНржб ржХрж░рж╛
VS Code-ржПрж░ ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржбржЯрж┐ ржжрж┐ржи:
```bash
npm run build
```
ржПржЯрж┐ `dist` ржирж╛ржорзЗ ржПржХржЯрж┐ ржлрзЛрж▓рзНржбрж╛рж░ рждрзИрж░рж┐ ржХрж░ржмрзЗред

### рзй. ржлрж╛ржЗрж▓ ржЖржкрж▓рзЛржб
1.  cPanel-ржП React-ржПрж░ рж╕рж╛ржм-ржбрзЛржорзЗржЗржирзЗрж░ ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржпрж╛ржи (ржпрзЗржоржи: `chat.yourdomain.com` ржПрж░ ржлрзЛрж▓рзНржбрж╛рж░)ред
2.  ржЖржкржирж╛рж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗрж░ `dist` ржлрзЛрж▓рзНржбрж╛рж░рзЗрж░ **ржнрж┐рждрж░рзЗрж░ рж╕ржм ржлрж╛ржЗрж▓** ржХржкрж┐ ржХрж░рзЗ рж╕рзЗржЦрж╛ржирзЗ ржЖржкрж▓рзЛржб ржХрж░рзБржиред

### рзк. рж░рж╛ржЙржЯрж┐ржВ ржарж┐ржХ ржХрж░рж╛ (ржЦрзБржмржЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг)
React ржЕрзНржпрж╛ржкрзЗ ржкрзЗржЬ рж░рж┐ржлрзНрж░рзЗрж╢ ржХрж░рж▓рзЗ ржпрзЗржи "404 Error" ржирж╛ ржЖрж╕рзЗ, рждрж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ `.htaccess` ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзБржи ржПржмржВ ржирж┐ржЪрзЗрж░ ржХрзЛржбржЯрж┐ ржжрж┐ржи:

```apacheconf
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-l
  RewriteRule . /index.html [L]
</IfModule>
```

---

## ЁЯЪА рж╕ржорж╕рзНржпрж╛ ржУ рж╕ржорж╛ржзрж╛ржи (Troubleshooting)

| рж╕ржорж╕рзНржпрж╛ | рж╕ржорж╛ржзрж╛ржи |
| :--- | :--- |
| **Backend 500 Error** | cPanel-ржПрж░ ржПрж░рж░ рж▓ржЧ ржЪрзЗржХ ржХрж░рзБржиред ржкрзНрж░рж╛рзЯржЗ `passenger_wsgi.py` ржлрж╛ржЗрж▓рзЗ ржкржерзЗрж░ ржнрзБрж▓ ржерж╛ржХрзЗред |
| **CORS Error (Browser Console)** | `settings.py` ржлрж╛ржЗрж▓рзЗ `CORS_ALLOWED_ORIGINS`-ржП ржЖржкржирж╛рж░ React рж╕рж╛ржЗржЯрзЗрж░ рж▓рж┐ржЩрзНржХ ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ржирж╛ ржжрзЗржЦрзБржи (http ржмржирж╛ржо https)ред |
| **Static Files ржжрзЗржЦрж╛ ржпрж╛ржЪрзНржЫрзЗ ржирж╛** | `python manage.py collectstatic` ржХржорж╛ржирзНржбржЯрж┐ рж░рж╛ржи ржХрж░рзЗржЫрзЗржи ржХрж┐ ржирж╛ ржЪрзЗржХ ржХрж░рзБржиред |
| **Database ржХрж╛ржЬ ржХрж░ржЫрзЗ ржирж╛** | ржирждрзБржи рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржирждрзБржи ржбрж╛ржЯрж╛ржмрзЗрж╕ рждрзИрж░рж┐ рж╣рзЯред рж╣рзЯ ржирждрзБржи ржХрж░рзЗ `createsuperuser` ржХрж░рзБржи, ржЕржержмрж╛ ржЖржкржирж╛рж░ ржкрж┐рж╕рж┐ ржерзЗржХрзЗ `db.sqlite3` ржлрж╛ржЗрж▓ржЯрж┐ ржЖржкрж▓рзЛржб ржХрж░рзЗ ржжрж┐ржиред |
| **React рж░рж┐ржлрзНрж░рзЗрж╢ ржжрж┐рж▓рзЗ 404** | ржЖржкржирж┐ `.htaccess` ржлрж╛ржЗрж▓ржЯрж┐ ржжрж┐рждрзЗ ржнрзБрж▓рзЗ ржЧрзЗржЫрзЗржиред |

---
**ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржк ржПржЦржи рж╕ржлрж▓ржнрж╛ржмрзЗ рж▓рж╛ржЗржн!** ЁЯЪА
